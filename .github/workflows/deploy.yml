name: Déploiement Service Utilisateur

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: self-hosted  # Utiliser le runner Ubuntu auto-hébergé

    steps:
      - name: Récupérer le code source
        uses: actions/checkout@v3

      - name: Vérifier le contenu du dépôt (debug)
        run: ls -R

      - name: Se déplacer dans le dossier du service utilisateur
        working-directory: service-utilisateur

      - name: Installer les dépendances
        run: npm install

      - name: Lancer les tests
        run: npm test

      - name: Construire l'application
        run: npm run build
